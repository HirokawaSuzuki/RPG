【2. システム仕様書】

2.1 基本システム構成

2.1.1 メインクラス構成
SimpleRPG/
├── Main.java (エントリーポイント)
├── GameEngine.java (ゲーム全体制御)
├── Player.java (プレイヤークラス)
├── Enemy.java (敵クラス)
├── Map.java (移動マップ)
├── Move.java (移動のクラス)
├── Battle.java (戦闘システム)
├── Item.java (アイテムクラス)
├── Shop.java (ショップシステム)
├── Dungeon.java (ダンジョンシステム)
└── SaveData.java (セーブデータ管理)

2.1.2 データ管理
- ファイルI/Oによるセーブ・ロード
- プレイヤーデータの永続化
- アイテム・装備情報の管理

2.2 キャラクターシステム

2.2.1 プレイヤーキャラクター
基本パラメータ:
- 名前 (String)
- レベル (int) 1〜99
- HP (int) 最大HP・現在HP
- MP (int) 最大MP・現在MP
- 攻撃力 (int)
- 防御力 (int)
- 素早さ (int)
- 経験値 (int)
- 所持金 (int)

成長システム:
- レベルアップ時のステータス上昇
- 必要経験値の計算式: nextLevel = currentLevel * 100 + 50

2.2.2 敵キャラクター
敵タイプ:
1. スライム (HP: 30, 攻撃: 15, 経験値: 20, ゴールド: 10)
2. ゴブリン (HP: 50, 攻撃: 25, 経験値: 35, ゴールド: 20)
3. オーク (HP: 80, 攻撃: 40, 経験値: 60, ゴールド: 35)
4. ドラゴン (HP: 200, 攻撃: 80, 経験値: 200, ゴールド: 100)

2.3 戦闘システム

2.3.1 ターンベース戦闘
戦闘フロー:
1. 敵とのエンカウント
2. 戦闘開始メッセージ
3. プレイヤーの行動選択
   - 攻撃
   - 魔法 (MP消費)
   - アイテム使用
   - 逃げる
4. 敵の行動
5. 勝敗判定
6. 経験値・ゴールド・アイテム獲得

2.3.2 ダメージ計算
基本ダメージ計算:
int damage = attacker.getAttack() - defender.getDefense();
if (damage < 1) damage = 1;

クリティカルヒット (10%確率で2倍):
if (Math.random() < 0.1) {
    damage *= 2;
    System.out.println("クリティカルヒット！");
}

2.4 アイテムシステム

2.4.1 アイテムタイプ
回復アイテム:
- ポーション (HP +50) 価格: 100G
- ハイポーション (HP +150) 価格: 300G
- マナポーション (MP +30) 価格: 150G

装備アイテム:
- 鉄の剣 (攻撃+10) 価格: 500G
- 鋼の剣 (攻撃+20) 価格: 1200G
- 皮の鎧 (防御+5) 価格: 300G
- 鉄の鎧 (防御+15) 価格: 800G

2.5 ダンジョンシステム

2.5.1 ダンジョン構造
利用可能ダンジョン:
1. 初心者の洞窟 (敵レベル: 1-3)
2. 暗闇の森 (敵レベル: 4-6)
3. 古い遺跡 (敵レベル: 7-10)
4. 竜の巣 (敵レベル: 15+)

2.5.2 探索システム
- 各フロアでランダムエンカウント
- 宝箱発見 (アイテム・ゴールド獲得)
- ボス戦 (各ダンジョンの最深階)

2.6 ユーザーインターフェース

2.6.1 メインメニュー
=== SimpleRPG Adventure ===
1. 冒険に出る
2. ショップ
3. ステータス確認
4. セーブ
5. ロード
6. ゲーム終了
選択してください:

2.6.2 戦闘画面
[敵] ゴブリン HP: 50/50

[あなた] レベル5 HP: 120/150 MP: 40/60

行動を選択してください:
1. 攻撃
2. 魔法
3. アイテム
4. 逃げる

2.7 技術仕様

2.7.1 開発環境
- Java 8以上
- IDE: IntelliJ IDEA / Eclipse
- ビルドツール: 標準javac

2.7.2 使用するJavaライブラリ
- java.util.Scanner (ユーザー入力)
- java.io.* (ファイルI/O)
- java.util.Random (ランダム要素)
- java.util.ArrayList (動的配列)

2.7.3 ファイル構造
savedata.dat - プレイヤーデータ
items.txt - アイテムデータベース
enemies.txt - 敵データベース

2.8 実装スケジュール

Phase 1 (1週目)
- 基本クラス設計
- プレイヤー・敵キャラクター実装
- 基本戦闘システム

Phase 2 (2週目)
- アイテムシステム
- ショップ機能
- ダンジョン探索

Phase 3 (3週目)
- セーブ・ロード機能
- UI改善
- バランス調整

Phase 4 (4週目)
- バグ修正
- 機能追加
- テストプレイ